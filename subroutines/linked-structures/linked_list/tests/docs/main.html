<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>main.s</title>
<link rel="stylesheet" type="text/css" href="highlight.css">
</head>
<body class="hl">
<pre class="hl"><span class="hl ppc">.section .data</span>
    <span class="hl ppc">.align 8</span>
test_list<span class="hl opt">:</span>
    <span class="hl ppc">.quad 0            // head (ptr)        </span>

    <span class="hl ppc">.align 8</span>
ListNode<span class="hl opt">:</span>
    <span class="hl ppc">.quad 0            // value</span>
    <span class="hl ppc">.quad 0            // next (ptr)        </span>

    <span class="hl ppc">.align 8</span>
print_node_format<span class="hl opt">:</span>
    <span class="hl ppc">.asciz</span> <span class="hl pps">&quot;%d</span><span class="hl esc">\n</span><span class="hl pps">&quot;</span><span class="hl ppc"></span>

<span class="hl ppc">.section .text</span>
<span class="hl ppc">.global _start</span>
_start<span class="hl opt">:</span>
    <span class="hl opt">//</span> Initialize the list
    ldr x0<span class="hl opt">, =</span>test_list
    <span class="hl kwa">bl</span> linked_list_create

    <span class="hl opt">//</span> Append some elements to the list
    ldr x0<span class="hl opt">, =</span>test_list
    mov w1<span class="hl opt">,</span> <span class="hl slc">#10</span>
    <span class="hl kwa">bl</span> linked_list_append

    ldr x0<span class="hl opt">, =</span>test_list
    mov w1<span class="hl opt">,</span> <span class="hl slc">#20</span>
    <span class="hl kwa">bl</span> linked_list_append

    ldr x0<span class="hl opt">, =</span>test_list
    mov w1<span class="hl opt">,</span> <span class="hl slc">#30</span>
    <span class="hl kwa">bl</span> linked_list_append

    <span class="hl opt">//</span> Print the list
    ldr x0<span class="hl opt">, =</span>test_list
    <span class="hl kwa">bl</span> linked_list_print

    <span class="hl opt">//</span> Free the list
    ldr x0<span class="hl opt">, =</span>test_list
    <span class="hl kwa">bl</span> linked_list_free

    <span class="hl opt">//</span> Print <span class="hl kwa">a</span> message indicating the end of the program
    ldr x0<span class="hl opt">, =</span>end_message
    <span class="hl kwa">bl</span> putstr

    <span class="hl opt">//</span> Exit the program
    mov x0<span class="hl opt">,</span> <span class="hl slc">#0</span>
    mov w8<span class="hl opt">,</span> <span class="hl slc">#93</span>
    <span class="hl kwa">svc</span> <span class="hl num">0</span>

end_message<span class="hl opt">:</span>
    <span class="hl ppc">.ascii</span> <span class="hl pps">&quot;Program finished.</span><span class="hl esc">\n</span><span class="hl pps">&quot;</span><span class="hl ppc"></span>
    <span class="hl ppc">.byte 0</span>
</pre>
</body>
</html>
<!--HTML generated by highlight 3.41, http://www.andre-simon.de/-->
