<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>indxof.s</title>
<link rel="stylesheet" type="text/css" href="highlight.css">
</head>
<body class="hl">
<pre class="hl"><span class="hl com">/**</span>
<span class="hl com"> * indxof - Returns the index of the first occurrence of character ch in a given String.</span>
<span class="hl com"> *</span>
<span class="hl com"> * This function searches for the first occurrence of the specified character ch in the target </span>
<span class="hl com"> * string and returns the index of the first occurrence of the character ch in the target string. </span>
<span class="hl com"> * The search starts from the beginning of the target string. If the character ch is not found </span>
<span class="hl com"> * in the target string, the function returns -1. </span>
<span class="hl com"> *</span>
<span class="hl com"> * &#64;param x0: address of the target string to search.</span>
<span class="hl com"> * &#64;param x1: Character to find in the target string.</span>
<span class="hl com"> * &#64;return x0: Integer index of the first occurrence of character ch in the target string. </span>
<span class="hl com"> *             If the character is not found, returns -1.</span>
<span class="hl com"> *</span>
<span class="hl com"> * Registers used: x0, x1, x2, lr</span>
<span class="hl com"> * Registers saved: none</span>
<span class="hl com"> */</span>
<span class="hl ppc">.text</span>
<span class="hl ppc">.global indxof</span>
    indxof<span class="hl opt">:</span>
        <span class="hl opt">//</span> Save the return address on the stack
        str <span class="hl kwb">lr</span><span class="hl opt">, [</span>sp<span class="hl opt">,</span> <span class="hl slc">#-16]!</span>

        <span class="hl opt">//</span> Set the search starting index to <span class="hl opt">-</span><span class="hl num">1</span>
        mov x2<span class="hl opt">,</span> <span class="hl slc">#-1</span>

        <span class="hl opt">//</span> Call the `indxoffrm` subroutine to find the index of the first occurrence of the character
        <span class="hl opt">//</span> starting from index <span class="hl num">0</span><span class="hl ppc">.</span>
        <span class="hl kwa">bl</span> indxoffrm

        <span class="hl opt">//</span> Restore the return address <span class="hl kwa">and</span> return the result in x0
        ldr <span class="hl kwb">lr</span><span class="hl opt">, [</span>sp<span class="hl opt">],</span> <span class="hl slc">#16</span>
        ret
</pre>
</body>
</html>
<!--HTML generated by highlight 3.41, http://www.andre-simon.de/-->
