<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>chrat.s</title>
<link rel="stylesheet" type="text/css" href="highlight.css">
</head>
<body class="hl">
<pre class="hl"><span class="hl com">/**</span>
<span class="hl com"> * chrat - retrieves the character at a given position in a string</span>
<span class="hl com"> * &#64;param x0: pointer to the string</span>
<span class="hl com"> * &#64;param x1: index of the character to retrieve</span>
<span class="hl com"> * &#64;return w0: the character at the specified position</span>
<span class="hl com"> *</span>
<span class="hl com"> * This function retrieves the character at the index specified by x1 in the</span>
<span class="hl com"> * string pointed to by x0. If the index is out of bounds, the function returns</span>
<span class="hl com"> * the null terminator.</span>
<span class="hl com"> *</span>
<span class="hl com"> * Registers used: x0, x1, x2, w0, w3</span>
<span class="hl com"> * Registers saved: none</span>
<span class="hl com"> */</span>

<span class="hl ppc">.text</span>
<span class="hl ppc">.global chrat</span>
    chrat<span class="hl opt">:</span>
        <span class="hl opt">//</span> Load the maximum number of characters to count into x2 <span class="hl opt">(</span><span class="hl num">1</span> character<span class="hl opt">)</span>
        mov x2<span class="hl opt">,</span> <span class="hl slc">#1</span>
        
        <span class="hl opt">//</span> Compute the memory address of the character at the specified index
        <span class="hl kwa">add</span> x0<span class="hl opt">,</span> x0<span class="hl opt">,</span> x1
        
        <span class="hl opt">//</span> Load the character from memory into w0
        ldrb w0<span class="hl opt">, [</span>x0<span class="hl opt">]</span>
        
        <span class="hl opt">//</span> If the character is the null terminator<span class="hl opt">,</span> return it
        cbz w0<span class="hl opt">,</span> done
        
        <span class="hl opt">//</span> Otherwise<span class="hl opt">,</span> return the character
        ret
        
    done<span class="hl opt">:</span>
        <span class="hl opt">//</span> Return the null terminator
        mov w0<span class="hl opt">,</span> <span class="hl slc">#0</span>
        ret
</pre>
</body>
</html>
<!--HTML generated by highlight 3.41, http://www.andre-simon.de/-->
