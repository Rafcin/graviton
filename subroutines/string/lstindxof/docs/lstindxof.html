<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>lstindxof.s</title>
<link rel="stylesheet" type="text/css" href="highlight.css">
</head>
<body class="hl">
<pre class="hl"><span class="hl com">/**</span>
<span class="hl com"> * lstindxof - Returns the last index of a given substring in a target string.</span>
<span class="hl com"> *</span>
<span class="hl com"> * This function finds the last occurrence of the given substring in the target string</span>
<span class="hl com"> * using the lstindxoffrm function, which searches for the last occurrence of a single</span>
<span class="hl com"> * character in the target string. The function then returns the index of the last </span>
<span class="hl com"> * occurrence of the substring in the target string, or -1 if the substring is not found.</span>
<span class="hl com"> *</span>
<span class="hl com"> * &#64;param x0: Address of the target string to search.</span>
<span class="hl com"> * &#64;param x1: Address of the substring to find in the target string.</span>
<span class="hl com"> * &#64;return x0: Integer index of the last occurrence of the substring in the target string, </span>
<span class="hl com"> *             or -1 if the substring is not found.</span>
<span class="hl com"> *</span>
<span class="hl com"> * Registers used: x0, x1, x2, lr</span>
<span class="hl com"> * Registers saved: none</span>
<span class="hl com"> */</span>

<span class="hl ppc">.text</span>
<span class="hl ppc">.global lstindxof</span>
    lstindxof<span class="hl opt">:</span>
        <span class="hl opt">//</span> Save the return address on the stack
        str <span class="hl kwb">lr</span><span class="hl opt">, [</span>sp<span class="hl opt">,</span> <span class="hl slc">#-16]!</span>
        <span class="hl opt">//</span> Save the parameters on the stack
        stp x0<span class="hl opt">,</span> x1<span class="hl opt">, [</span>sp<span class="hl opt">,</span> <span class="hl slc">#-16]!</span>
        <span class="hl opt">//</span> Call the length function to get the length of the target string
        <span class="hl kwa">bl</span> length
        <span class="hl opt">//</span> Save the length of the target string in x2
        mov x2<span class="hl opt">,</span> x0
        <span class="hl opt">//</span> Restore the parameters from the stack
        ldp x0<span class="hl opt">,</span> x1<span class="hl opt">, [</span>sp<span class="hl opt">],</span> <span class="hl slc">#16</span>
        <span class="hl opt">//</span> Call the lstindxoffrm function to find the last occurrence of the substring in the target string
        <span class="hl kwa">bl</span> lstindxoffrm
        <span class="hl opt">//</span> Restore the return address from the stack
        ldr <span class="hl kwb">lr</span><span class="hl opt">, [</span>sp<span class="hl opt">],</span> <span class="hl slc">#16</span>
        <span class="hl opt">//</span> Return the index of the last occurrence of the substring in the target string
        ret
</pre>
</body>
</html>
<!--HTML generated by highlight 3.41, http://www.andre-simon.de/-->
