<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>lstindxoffrm.s</title>
<link rel="stylesheet" type="text/css" href="highlight.css">
</head>
<body class="hl">
<pre class="hl"><span class="hl com">/**</span>
<span class="hl com"> * lstindxoffrm - Returns the last occurrence of character ch in the given String.</span>
<span class="hl com"> *</span>
<span class="hl com"> * &#64;param x0: Address of the target string to search.</span>
<span class="hl com"> * &#64;param x1: Char to find in the target string</span>
<span class="hl com"> * &#64;param x2: Index to start the search at</span>
<span class="hl com"> * &#64;return x0: Index</span>
<span class="hl com"> */</span>
 
 
<span class="hl ppc">.text</span>
<span class="hl ppc">.global lstindxoffrm</span>
    lstindxoffrm<span class="hl opt">:</span>
        <span class="hl opt">//</span>Change last index to ptr
        <span class="hl kwa">add</span> x2<span class="hl opt">,</span> x2<span class="hl opt">,</span> x0
        <span class="hl kwa">sub</span> x2<span class="hl opt">,</span> x2<span class="hl opt">,</span> <span class="hl slc">#1</span>
    loop<span class="hl opt">:</span>
        <span class="hl kwa">cmp</span> x2<span class="hl opt">,</span> x0
        b.lt error
        ldrb w3<span class="hl opt">, [</span>x2<span class="hl opt">],</span> <span class="hl slc">#-1</span>
        <span class="hl kwa">cmp</span> w3<span class="hl opt">,</span> w1
        b.eq found
        <span class="hl kwa">b</span> loop
    found<span class="hl opt">:</span>
        <span class="hl kwa">add</span> x2<span class="hl opt">,</span> x2<span class="hl opt">,</span> <span class="hl slc">#1</span>
        <span class="hl kwa">sub</span> x0<span class="hl opt">,</span> x2<span class="hl opt">,</span> x0
        ret
    error<span class="hl opt">:</span>
        mov x0<span class="hl opt">,</span> <span class="hl slc">#-1</span>
        ret
</pre>
</body>
</html>
<!--HTML generated by highlight 3.41, http://www.andre-simon.de/-->
