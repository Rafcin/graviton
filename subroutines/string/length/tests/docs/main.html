<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>main.s</title>
<link rel="stylesheet" type="text/css" href="highlight.css">
</head>
<body class="hl">
<pre class="hl"><span class="hl com">/*</span>
<span class="hl com"> * Test driver for &quot;length&quot;</span>
<span class="hl com"> */</span>
<span class="hl ppc">.data</span>
	targ<span class="hl opt">:</span>	<span class="hl ppc">.asciz</span>	<span class="hl pps">&quot;Life, the universe and everything. Answer-&quot;</span><span class="hl ppc"></span>
	out<span class="hl opt">:</span>	<span class="hl ppc">.asciz</span>	<span class="hl pps">&quot;Length is - &quot;</span><span class="hl ppc"></span>
	result<span class="hl opt">:</span>	<span class="hl ppc">.skip	21</span>
    nl<span class="hl opt">:</span> <span class="hl ppc">.asciz</span> <span class="hl pps">&quot;</span><span class="hl esc">\n</span><span class="hl pps">&quot;</span><span class="hl ppc"></span>
<span class="hl ppc">.text</span>
<span class="hl ppc">.global main</span>
    main<span class="hl opt">:</span>
        <span class="hl opt">//</span>Load <span class="hl kwa">and</span> calc string len
        ldr	x0<span class="hl opt">,	=</span>targ
        <span class="hl kwa">bl</span>	length
        <span class="hl opt">//</span>Conv to s
        ldr	x1<span class="hl opt">,	=</span>result
        <span class="hl kwa">bl</span>	int64asc
        <span class="hl opt">//</span>Print output text
        ldr	x0<span class="hl opt">,	=</span>out
        <span class="hl kwa">bl</span>	putstring
        <span class="hl opt">//</span>Print result
        ldr	x0<span class="hl opt">,	=</span>result
        <span class="hl kwa">bl</span>	putstring
        <span class="hl opt">//</span>Print newline
        ldr	x0<span class="hl opt">,	=</span>nl
        <span class="hl kwa">bl</span>	putstring
        
        <span class="hl opt">//</span> Setup the parameters to exit the program <span class="hl kwa">and</span> then call Linux to do it.
        mov	x0<span class="hl opt">,</span>	<span class="hl slc">#0	// Sets return code to 0</span>
        mov	x8<span class="hl opt">,</span>	<span class="hl slc">#93	// Service command code 93 terminates</span>
        <span class="hl kwa">svc</span>	<span class="hl num">0</span>	<span class="hl opt">//</span> Call linux to terminate the program
</pre>
</body>
</html>
<!--HTML generated by highlight 3.41, http://www.andre-simon.de/-->
